{
  "name": "knowledge-base-bootstrap",
  "description": "One-command knowledge base setup: ingest a document, verify the collection, run a test query, and generate a status report confirming everything works.",
  "version": "1.0.0",
  "inputs": {
    "document": {
      "type": "string",
      "required": true
    },
    "collection": {
      "type": "string",
      "required": true
    },
    "test_query": {
      "type": "string",
      "required": true
    }
  },
  "defaults": {},
  "steps": [
    {
      "id": "ingest_doc",
      "tool": "ingest",
      "name": "Ingest document into collection",
      "inputs": {
        "text": "{{ inputs.document }}",
        "collection": "{{ inputs.collection }}"
      }
    },
    {
      "id": "verify_collection",
      "tool": "collections",
      "name": "Verify collection was created",
      "inputs": {}
    },
    {
      "id": "test_search",
      "tool": "query",
      "name": "Run test query to validate retrieval",
      "inputs": {
        "query": "{{ inputs.test_query }}",
        "collection": "{{ inputs.collection }}",
        "limit": 5
      }
    },
    {
      "id": "status_report",
      "tool": "generate",
      "name": "Generate bootstrap status report",
      "inputs": {
        "prompt": "Generate a concise status report for a knowledge base bootstrap. Confirm:\n1. Document was ingested successfully\n2. Collection exists and has the expected documents\n3. Test query returned relevant results\n4. The knowledge base is ready for use\n\nIf any step shows issues, explain what went wrong and how to fix it.\n\nProvide suggested next steps (add more documents, try different queries, explore the Playground).\n\nCollection: {{ inputs.collection }}\nTest query: {{ inputs.test_query }}",
        "context": {
          "ingestion_result": "{{ ingest_doc.output }}",
          "collection_info": "{{ verify_collection.output }}",
          "search_results": "{{ test_search.output }}"
        }
      }
    }
  ],
  "output": {
    "status": "{{ status_report.output.response }}",
    "search_results": "{{ test_search.output.results }}",
    "collection": "{{ verify_collection.output }}"
  }
}
