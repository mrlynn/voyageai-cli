{
  "name": "meeting-action-items",
  "description": "Ingest meeting notes into the knowledge base and extract structured action items with owners, deadlines, and context from prior meetings.",
  "version": "1.0.0",
  "inputs": {
    "notes": {
      "type": "string",
      "required": true
    },
    "collection": {
      "type": "string",
      "required": true
    },
    "meeting_topic": {
      "type": "string",
      "required": true
    },
    "date": {
      "type": "string",
      "default": "today"
    }
  },
  "defaults": {},
  "steps": [
    {
      "id": "store_notes",
      "tool": "ingest",
      "name": "Ingest meeting notes into knowledge base",
      "inputs": {
        "text": "{{ inputs.notes }}",
        "collection": "{{ inputs.collection }}",
        "metadata": {
          "type": "meeting-notes",
          "topic": "{{ inputs.meeting_topic }}",
          "date": "{{ inputs.date }}"
        }
      }
    },
    {
      "id": "prior_context",
      "tool": "query",
      "name": "Find related prior action items and decisions",
      "inputs": {
        "query": "{{ inputs.meeting_topic }} action items decisions follow-up",
        "collection": "{{ inputs.collection }}",
        "limit": 10
      }
    },
    {
      "id": "extract_actions",
      "tool": "generate",
      "name": "Extract structured action items",
      "inputs": {
        "prompt": "Extract all action items from the following meeting notes. For each action item provide:\n1. **Action**: What needs to be done\n2. **Owner**: Who is responsible (use the name mentioned, or 'Unassigned' if unclear)\n3. **Deadline**: When it's due (use the date mentioned, or 'TBD' if unclear)\n4. **Priority**: High/Medium/Low based on context\n5. **Related prior items**: Note any connections to previous action items or decisions from the context below\n\nAlso extract:\n- **Key decisions** made during the meeting\n- **Open questions** that were raised but not resolved\n- **Follow-up meetings** scheduled or needed\n\nMeeting topic: {{ inputs.meeting_topic }}\nDate: {{ inputs.date }}",
        "context": {
          "current_notes": "{{ inputs.notes }}",
          "prior_related": "{{ prior_context.output.results }}"
        }
      }
    }
  ],
  "output": {
    "action_items": "{{ extract_actions.output.response }}",
    "stored": true,
    "chunks_created": "{{ store_notes.output.chunksCreated }}",
    "prior_context_found": "{{ prior_context.output.results.length }}"
  }
}
