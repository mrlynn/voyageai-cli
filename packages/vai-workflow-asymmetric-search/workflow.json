{
  "name": "asymmetric-search",
  "description": "Demonstrate asymmetric retrieval: documents embedded with voyage-4-large, queries embedded with voyage-4-lite. Same embedding space, ~83% query cost reduction.",
  "version": "1.0.0",
  "inputs": {
    "query": {
      "type": "string",
      "required": true
    },
    "collection": {
      "type": "string",
      "required": true
    },
    "limit": {
      "type": "number",
      "default": 10
    }
  },
  "defaults": {},
  "steps": [
    {
      "id": "embed_query",
      "tool": "embed",
      "name": "Embed query with voyage-4-lite (low cost)",
      "inputs": {
        "texts": [
          "{{ inputs.query }}"
        ],
        "model": "voyage-4-lite",
        "inputType": "query"
      }
    },
    {
      "id": "vector_search",
      "tool": "search",
      "name": "Search collection (docs embedded with voyage-4-large)",
      "inputs": {
        "query": "{{ inputs.query }}",
        "collection": "{{ inputs.collection }}",
        "model": "voyage-4-lite",
        "limit": 20
      }
    },
    {
      "id": "rerank_results",
      "tool": "rerank",
      "name": "Rerank for final relevance ordering",
      "inputs": {
        "query": "{{ inputs.query }}",
        "documents": "{{ vector_search.output.results }}",
        "model": "rerank-2.5",
        "limit": "{{ inputs.limit }}"
      }
    }
  ],
  "output": {
    "results": "{{ rerank_results.output.results }}",
    "query_model": "voyage-4-lite",
    "document_model": "voyage-4-large",
    "note": "Documents were embedded with voyage-4-large. Query was embedded with voyage-4-lite. Both share the same embedding space."
  }
}
